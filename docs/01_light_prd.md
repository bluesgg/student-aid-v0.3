# StudentAid Web - Light PRD（精简版需求文档）

> 本文为原始 Light PRD 的修订版，重点更新「AI 讲解 / 贴纸」相关能力与规则。

---

## 一、文档说明

* 本文为 StudentAid Web（MVP 阶段）的精简需求文档（Light PRD）；
* 与以下文档配套使用：

  * `02_page_and_flow_design.md`（页面与流程设计）
  * `03_api_design.md`（API / 接口设计）
  * `04_tech_and_code_style.md`（技术与代码规范）
* 本次修订重点：

  * 明确 AI 讲解模块的整体目标与使用链路；
  * 细化「自动讲解贴纸 / 选中文本讲解贴纸 / 问答 / 总结」四类 AI 功能的角色、触发方式与配额策略；
  * 统一 AI 回复格式（Markdown + LaTeX + 代码高亮）及贴纸表现、持久化策略。

---

## 二、背景 & 目标简述

### 2.1 背景概述

* 大学生在复习一门或多门「硬课」（如高数、线代、统计等）时，讲义 / 作业 / 往年卷等 PDF 分散在本地、网盘、学习平台中，难以集中管理。
* 现有 AI 工具多是通用聊天或刷题工具，无法围绕「具体课程 + 具体 PDF」提供系统化讲解与考点总结。
* 对于考前冲刺的学生，更需要的是：**集中整理资料 + 针对 PDF 讲解 + 课程级考点提纲** 的一体化体验。

### 2.2 本期目标（MVP 级）

> 帮助大学生在考前复习场景下，将自己一门或多门课程的 PDF 资料集中管理，并在阅读过程中通过 AI 讲解与考点总结，快速掌握各门课的高频考点与关键公式。

核心目标拆解：

1. **资料集中管理**：

   * 以「课程」为单位，将 Lecture / Homework / Exam PDF 汇总在一个简单的资料中心。
2. **围绕 PDF 的 AI 学习体验**：

   * 在同一页面内完成「看讲义 PDF + 看 AI 讲解（贴纸）+ 针对不懂的地方追问」。
3. **课程级复习提纲**：

   * 基于多份 PDF，自动生成课程级提纲和高频考点清单，用于考前冲刺。

---

## 三、核心用户 & 场景

### 3.1 核心用户画像

* **目标人群**：以理工科 / 商科中有较多「硬课」（如高数、线性代数、概率论、统计、财务等）的大学本科生 / 研究生为主。
* **典型特征**：

  * 平时课内跟得一般，考前需要大量突击复习；
  * 资料来源混杂（学校 LMS、老师邮件、微信群 / QQ 群、网盘链接等）；
  * 偏重解题和应试导向，希望「少走弯路」，更快抓住重点；
  * 对工具容忍度中等，愿意花一点时间整理资料，但不希望有太多复杂配置。
* **能力 & 动机**：

  * 对 PDF、网盘、云盘等基本工具较为熟悉；
  * 对 AI 工具有一定了解，愿意尝试用 AI 帮助理解推导、做总结；
  * 更依赖逐步讲解与辅助说明来建立直觉。

### 3.2 关键使用场景

#### 场景 1：整学期边看讲义边理解（跟课）

* **触发时机**：每次上课后 / 做作业前后，学生需要回看当周讲义。
* **目标**：快速搞懂推导细节和难懂公式，避免知识点堆积到考前。
* **概览流程**：

  1. 登录 StudentAid，进入课程列表；
  2. 打开本周课程（如 Calculus I）；
  3. 在 Lecture 区域找到本周讲义 PDF 并打开；
  4. 使用「解释当前页」自动讲解、选中讲解贴纸和问答功能，理解关键推导；
  5. 若有必要，为该 PDF 或某一章节生成总结，作为课后复盘资料。

#### 场景 2：考前集中复习（冲刺）

* **触发时机**：考前 1–2 周，学生希望快速构建 / 梳理整门课的知识框架。
* **目标**：

  * 从零构建一门课的考点提纲；
  * 找到「高频考点 + 典型题型」；
  * 重点回看自己薄弱章节。
* **概览流程**：

  1. 将整门课的 Lecture / Homework / Exam PDF 集中上传到课程中；
  2. 对关键 Lecture / Homework 逐个生成文档 / 章节总结；
  3. 基于 PDF 进行针对性问答和例题解析（尽量以选中文本讲解为主）；
  4. 最后生成课程级提纲 / 考点总结。

#### 场景 3：快速理解某份难懂作业 / 讲义

* **触发时机**：遇到一份非常难的作业题或推导很多的讲义章节。
* **目标**：

  * 不需要完全精读整份 PDF，而是重点理解某几个页面 / 段落；
  * 希望 AI 能按步骤解释推导，并给出必要的中间步骤和直觉；
  * 若有必要，通过多轮问答澄清自己的困惑。
* **概览流程**：

  1. 在 PDF 阅读器中定位到相关页面；
  2. 使用「解释当前页」快速获得本页概览；
  3. 对具体不懂的公式 / 句子使用选中文本讲解贴纸；
  4. 根据 AI 解释进行追问；
  5. 若该段很重要，可补充生成该章节的小结。

---

## 四、产品范围 & 模块拆分

### 4.1 学习 & AI 模块（阅读 / 贴纸 / 问答 / 总结）

> 目标：围绕「具体课程 + 具体 PDF」，在同一界面内完成「看讲义 PDF + 看 AI 讲解 + 追问」，而不是跳到单独的聊天工具中。

#### 4.1.1 核心体验与布局

* **整体布局**：

  * 左侧：内嵌 PDF 阅读器；
  * 右侧：AI 学习区域（上部为讲解贴纸栏，下部为基于当前 PDF 的问答与总结）。
* **核心体验**：

  * **边看讲义、边看 AI 讲解、边发问**：

    * 左侧保持对原始 PDF 内容的忠实展示；
    * 右侧贴纸与当前页 / 段落在竖直方向大致对齐；
    * 可以直接对不懂的句子 / 公式发问，并形成追问链。

#### 4.1.2 四类 AI 能力及角色划分

1. **自动讲解（本页自动解释）**

   * 角色：像老师在黑板旁边帮你“划重点 + 概览”；
   * 触发方式：用户在右侧 AI 区域点击「解释当前页 / Explain this page」按钮后，系统为当前页生成若干条自动讲解贴纸；
   * 典型内容：

     * 本页 / 本段在讲什么；
     * 关键公式 / 结论的直观解释；
     * 适量直觉说明与简单例子。

2. **选中文本讲解贴纸（Manual / 追问链）**

   * 角色：针对「这句话 / 这个公式看不懂」的精细讲解；
   * 触发方式：

     * 在 PDF 原文中选中一段文本 / 公式 → 点击「AI 讲解」；
     * 或在已有贴纸中选中某句话 → 点击「AI 讲解」继续追问；
   * 行为：

     * 第一条贴纸对齐到原文位置；
     * 对某贴纸的追问贴纸紧挨原贴纸向下排列，形成一个小 thread（追问链）。

3. **基于当前 PDF 的自由问答（Q&A）**

   * 角色：回答跨页、综合性问题，例如「这一章几个定理之间的关系」；
   * 触发方式：在右下问答区域输入问题 → AI 基于当前 PDF（可参考贴纸上下文）回答；
   * 行为：

     * 回答中尽量引用具体页码 / 段落；
     * 可以提示用户查看对应贴纸，但 Q&A 回答本身不做成贴纸。

4. **文档 / 章节 / 课程总结**

   * 角色：为考前复习提供**结构化提纲**，而不是逐句解释；
   * 类型：

     * 文档总结：单个 PDF 的整体提纲 + 关键概念 + 重要公式；
     * 章节总结：某个页区间的局部总结；
     * 课程级总结：基于课程下多份 PDF 的提纲与高频考点（用于课程级复习提纲页）。

#### 4.1.3 PDF 类型与 AI 行为差异（Lecture / Homework / Exam）

* **Lecture（讲义）**：

  * 自动讲解：

    * 以“说明内容 + 概念讲解 + 公式直觉”为主；
    * 尽量不重复原文，而是做「解释 +重组」。
* **Homework / Exam（作业 / 考卷）**：

  * 自动讲解：

    * 不直接给出题目完整解答；
    * 重点说明：

      * 本页题目大致考察什么知识点；
      * 常见解题思路 / 易错点；
    * 具体解题步骤建议通过「选中文本讲解」针对某题发问。
* **Other**：

  * 作为通用 PDF 处理，与 Lecture 行为一致，但在提纲 / 课程总结时优先度可略低。

#### 4.1.4 内嵌 PDF 阅读器能力（左侧）

* 支持分页 / 连续滚动模式切换；
* 支持缩放、页码跳转、上一页 / 下一页；
* 记录 `lastReadPage`：

  * 每个 `(userId, courseId, fileId)` 维度上记住最后阅读页；
  * 再次打开该 PDF 时自动跳转到此页。

#### 4.1.5 右侧 AI 学习区域（贴纸栏 + 问答区域）

* **贴纸栏（上半部分）**：

  * 显示自动讲解贴纸和选中文本讲解贴纸；
  * 贴纸整体随页面滚动；
  * 与左侧对应页 / 段落在竖直方向大致对齐；
  * 支持点击贴纸后左侧 PDF 自动滚动到对应位置（双向定位）。
* **问答区域（下半部分）**：

  * 显示围绕当前 PDF 的问答记录与总结结果；
  * 底部为输入框（占位文案："Ask a question about this PDF..."）；
  * 与贴纸共享上下文与同一 PDF 的检索结果。

#### 4.1.6 自动讲解贴纸（Explain this page）

* **触发方式**：

  * 用户在右侧 AI 区域点击「解释当前页 / Explain this page」按钮；
  * 系统只对当前页进行自动讲解（或小范围页区间，如当前页 ±1），不会在打开 PDF 时全局自动生成。
* **针对不同 PDF 风格的分段与数量控制**：

  * PPT 风格 PDF（每页若干要点）：

    * 以「页」为单位；
    * 模型自动识别本页 2–5 个核心要点或区块；
    * 每个要点生成一条自动讲解贴纸；
    * 若本页内容非常密集，控制单页自动贴纸总数不超过约 5–6 条。
  * 长文本风格 PDF（连续段落讲义）：

    * 先按自然段落 + 语义分段做切分；
    * 若连续段落过长（> ~300 字），进一步拆成 200–300 字的小块；
    * 每个块生成一条自动讲解贴纸；
    * 同一页贴纸数量同样有总数上限（约 5–6 条）。
* **内容要求（推荐模板级别）**：

  * 简要说明“这一块在讲什么”（1–2 句话）；
  * 列出 2–4 个关键点；
  * 显式指出关键公式，并给出直觉解释（如适用用 LaTeX）；
  * 适量给出简单例子（特别是抽象概念时）。
* **持久化与重复访问行为**：

  * 首次点击「解释当前页」生成的自动贴纸会存入后端；
  * 后续再访问该页时，优先从存量贴纸恢复，而非重复生成；
  * 若用户未点击该按钮，则该页不会自动产生贴纸（即：自动讲解是「显式触发的系统辅助」，而非无条件后台任务）。

#### 4.1.7 选中文本讲解贴纸 & 追问链（Manual）

* **从 PDF 原文选中触发**：

  * 用户在左侧 PDF 中拖拽选中某段文本或公式附近的文字；
  * 在选区附近出现浮层按钮「AI 讲解」；
  * 点击后：

    * 在右侧贴纸栏中、与该段对应位置附近插入一条新的「选中文本讲解贴纸」；
    * 贴纸展示：

      * 原文片段（可截断）；
      * AI 对该片段的具体解释（Markdown）。
* **从贴纸文本继续追问**：

  * 用户在已有贴纸正文中选中某句话或公式；
  * 同样弹出「AI 讲解」浮层；
  * 点击后：

    * 生成一条新的贴纸，紧挨上一条贴纸展示；
    * `parentId` 指向上一条，形成一个可视 thread（追问链）。
* **排序与对齐规则**：

  * 自动讲解贴纸按文档结构排序（按页、按段落从上到下）；
  * 手动贴纸：

    * 第一条对齐到其对应的原文位置插入；
    * 后续追问贴纸按父贴纸之后顺序排列；
  * 右侧列表整体随滚动，保持与左侧阅读高度大致对应。

#### 4.1.8 贴纸的表现、折叠与长度限制

* **类型区分与视觉样式**：

  * 贴纸分为两类：

    1. 自动讲解贴纸（Auto）
    2. 选中文本讲解贴纸（Manual，包括追问链）
  * 要求在视觉上显著可区分：

    * 背景色不同；
    * 或头部标签（如「Auto」「From selection」）；
    * 或不同图标。
* **折叠 / 展开**：

  * MVP 不支持删除贴纸；
  * 每条贴纸支持折叠 / 展开：

    * 展开状态：显示完整内容；
    * 折叠状态：只显示标题 / 原文片段 / 前几行。
  * 折叠状态需要持久化：

    * 每条贴纸有布尔字段 `folded`；
    * 用户折叠 / 展开操作会同步写入后端；
    * 再次打开 PDF 时按上次状态恢复。
* **长度限制与滚动**：

  * 单条贴纸的可视高度有限（例如 300–400 px），超过部分在贴纸内部滚动展示；
  * 调用 AI 时通过 prompt 引导：每条讲解控制在合理长度（如 400–600 字）；
  * 避免一条贴纸过长导致右侧列表难以浏览。

#### 4.1.9 贴纸持久化与重开文档行为

* **持久化内容**（逻辑层）：

  * 每条贴纸需与以下信息关联：

    * 用户 ID / 课程 ID / 文件 ID；
    * 页码（page）；
    * 原文锚点（文本片段、起止位置或坐标）；
    * 类型：`auto` / `manual`；
    * 来源：`pdf`（从 PDF 选中）或 `sticker`（从某贴纸选中）；
    * 父贴纸 ID（若为追问链）；
    * 排序字段（用于在列表中稳定排序）；
    * Markdown 讲解内容；
    * 折叠状态。
* **重开文档行为**：

  * 学生再次打开某 PDF：

    * 左侧：自动跳转到上次阅读页 `lastReadPage`；
    * 右侧：恢复该文件已有所有贴纸及其折叠状态；
    * 已生成的自动贴纸不会重复调用 AI。

#### 4.1.10 基于当前 PDF 的问答与总结

* **问答（Q&A）**：

  * 用户在问答区域输入问题，AI 基于当前 PDF 全文 + 已有贴纸上下文回答；
  * 回答中尽量引用页码 / 段落；
  * 支持返回引用列表（例如 p.3、p.10 及小片段摘要），前端可显示为「引用标记」。
* **总结**：

  * 文档级总结：

    * 对单个 PDF 给出整体结构、关键概念、重要公式；
  * 章节级总结：

    * 对某一页或页区间给出局部总结；
  * 课程级总结：

    * 基于一门课下多份 PDF 的总结结果合并生成课程提纲，供课程级提纲页使用。
* **与贴纸的关系**：

  * 问答与总结结果展示在问答区域，不作为贴纸；
  * 但模型可以参考贴纸内容作为上下文；
  * 提纲中可附带「跳转到对应 PDF + 页码」的信息，点击后进入 P5 对应位置。

#### 4.1.11 PDF 文本可用性与扫描件处理

* **支持范围（MVP）**：

  * 要求导入 PDF 为「可选中文本」；
  * 不支持纯扫描图片 / 无文本层的 PDF 做 AI 讲解。
* **上传阶段行为**：

  * 若检测到 PDF 基本无文本层：

    * 上传仍成功；
    * 在课程详情页中提示「当前版本不支持对该 PDF 进行 AI 讲解」。
* **阅读阶段行为**：

  * 在 P5 中，若文件不可选中文本：

    * 左侧仍可作为普通 PDF 阅读器使用；
    * 右侧 AI 区域显示说明：

      * 当前文件为扫描件，暂不支持选中文本和 AI 讲解功能；
    * 相关按钮（解释当前页、选中文本讲解）隐藏或禁用。

#### 4.1.12 统一富文本渲染（AI 回复格式）

* 所有 AI 输出（贴纸内容、问答、总结）统一为 **Markdown 文本**，前端使用统一 Markdown 渲染组件：

  * 支持完整 Markdown 语法：标题、粗体 / 斜体、列表、链接、表格、引用块等；
  * 支持 LaTeX 数学公式：

    * 行内：`$...$` 或 `\(...\)`；
    * 块级：`$$...$$` 或 `\[...\]`；
  * 支持常见语言的代码语法高亮：

    * 使用三反引号代码块并带语言标记（如 ` ```python`、` ```cpp` 等）。
* 后端 API 只返回纯文本 Markdown 字符串，不返回 HTML；
* 渲染逻辑统一由前端 `MarkdownRenderer` 完成。

---

## 五、关键流程 & 页面（一级拆解）

> 本章节聚焦主要用户路径与页面粗粒度说明，为后续 Page & Flow 设计文档提供结构依据。

> 说明：以下仅概述与 AI 相关的关键点，页面细节参见 `02_page_and_flow_design.md`。

### 5.1 登录 & 课程列表页（My Courses）

（与原版基本一致，仅保留简要说明）

* 登录 / 注册流程：邮箱 + 密码方式，登录成功后进入「My Courses」；
* 课程列表页展示用户所有课程卡片，可新建 / 编辑 / 删除课程，并显示每门课的文件数等基础信息。

### 5.2 课程 & 资料模块

* 课程详情页按文件类型（Lecture / Homework / Exam / Other）分组展示 PDF；
* 支持上传多份 PDF，指定类型并解析页数；
* 支持文件重命名、类型修改、删除。

### 5.3 学习 & AI 模块（PDF 阅读 & AI 学习页）

* 页面路径：`/courses/[courseId]/files/[fileId]`；
* 左侧 PDF 阅读器 + 右侧 AI 区域（贴纸栏 + 问答区域）的布局结构；
* 打开文件时：

  * 左侧跳转到 `lastReadPage`；
  * 右侧加载当前页附近的贴纸列表，并按需分页加载更多贴纸；
* 用户可：

  * 点击「解释当前页」生成本页自动讲解贴纸；
  * 在左侧选中文本，或在贴纸内选中文本，生成手动讲解贴纸及追问链；
  * 在问答区域提出更开放的问题；
  * 触发文档 / 章节总结，在问答区域查看结果；
  * 折叠 / 展开贴纸，控制右侧信息密度。

### 5.4 配额 & 实验规则模块

> 详见 5.4.2「AI 调用配额」，此处只强调与 AI 能力的关系。

* 以「课程」为单位维护 AI 使用配额；
* 将不同类型能力放入不同配额桶，以便控制成本与给出清晰提示。

### 5.5 数据 & 埋点模块

* 记录 AI 调用行为（按类型 / 课程 / 文件维度）；
* 记录贴纸生成、折叠 / 展开、问答触发等重点操作，以便后续优化模型模板与交互。

---

## 六、AI 调用配额与计费策略（按课程）

> 本节对「哪些行为计入 N」做统一说明，并与 03 API / 02 页面设计保持一致。

### 6.1 配额粒度

* 粒度：`(userId, courseId)`，每门课程独立计数；
* 前端在课程概览和 Usage 页中展示配额使用情况。

### 6.2 配额桶划分（最终方案）

1. **学习过程交互组（learningInteractions）**

   * 计入：

     * 选中文本讲解贴纸（从 PDF 原文选中触发）；
     * 从贴纸继续追问生成的贴纸；
     * 基于当前 PDF 的自由问答（Q&A）。
   * 不计入：

     * 自动讲解贴纸（Explain this page）。
2. **文档总结（documentSummary）**

   * 计入：

     * `Summarize this document` 调用。
3. **章节总结（sectionSummary）**

   * 计入：

     * `Summarize this section` 调用。
4. **课程级提纲（courseSummary）**

   * 计入：

     * `Generate course outline` 调用。

### 6.3 自动讲解贴纸的限流策略

* 自动讲解贴纸视为「系统级辅助」，不计入 learningInteractions；
* 为控制成本，需要在后端按「课程 + 文件」维度配置频率限制，例如：

  * 同一文件每天可生成自动讲解的页数上限；
  * 或同一课程每天自动讲解总页数上限；
* 当自动讲解触发频率异常高时，可以：

  * 返回提示，建议用户优先对关键页使用自动讲解；
  * 同时仍允许浏览既有贴纸。

### 6.4 前端配额提示与行为降级

* 当某配额桶剩余次数接近上限：

  * 在 P5 相关功能按钮附近显示轻量提示，如：

    * “You're close to the limit for AI explanations in this experiment.”
* 当触达上限时：

  * 对应功能按钮置灰；
  * 点击或 hover 显示 tooltip：

    * “You've reached the usage limit for this type in this experiment. You can still read your PDFs and existing notes.”
* 即便配额触顶：

  * 用户仍可浏览 PDF、已有贴纸和已生成的总结 / 提纲；
  * 不影响资料管理与基础阅读功能。

---

## 七、非功能性需求（简要）

### 7.1 性能

* PDF 阅读体验流畅，常规操作（翻页 / 缩放）在主流浏览器下无明显卡顿；
* 对典型中等大小 PDF（几十页），首屏加载时间大部分情况 ≤ 3 秒；
* AI 响应延迟控制在用户可接受范围内：

  * 理想情况下首响应 < 5 秒；
  * 超时（如 > 8–10 秒）需有明显的 loading 状态或提示。

### 7.2 安全 & 隐私

* 用户上传的 PDF 仅对本人可见，不对其他用户公开；
* 明确标注「实验性项目」性质及数据处理范围；
* 密码存储采用业界常规加密方式，不保存明文密码。

### 7.3 兼容性

* 优先支持桌面端 Chrome / Edge / Safari 最新版本；
* 移动端浏览器可做基础适配，后续再针对移动端体验单独优化。

### 7.4 可用性

* 首次使用时提供简短引导（如气泡 / 提示条），帮助用户理解：

  * 如何使用「解释当前页」生成自动讲解；
  * 如何选中文本触发贴纸讲解；
  * 如何在问答区域提问与生成总结。
* 对关键失败场景给出清晰可理解的错误提示（如配额触顶、文件类型不支持 AI 等）。

### 7.5 可扩展性

* AI 相关能力基于统一的检索 + LLM 架构设计（RAG 思路），避免为每种能力创建完全独立的实现；
* 后续可在现有架构上扩展：

  * 多人协作（组队复习）；
  * 题库管理与刷题；
  * 更复杂的学习路径规划与个性化建议；
  * 笔记 / 贴纸导出为讲义手册等功能。

### 7.6 技术选型（MVP 固定）

* **BaaS**：Supabase（Auth + Postgres + Storage），仅在服务端使用 Supabase SDK；前端不直连 BaaS，只调用自家 `/api/*`。
* **LLM Provider**：OpenAI API，用于所有 AI 端点（`explain-page`、`explain-selection`、`qa`、`summarize-*`）；仅服务端调用，密钥不下发到浏览器。

---

## 八、里程碑 & 范围控制（MVP）

### 8.1 第一阶段（MVP）

* 实现完整的「课程管理 + 资料上传 + PDF 阅读 + AI 讲解 / 问答 / 总结」闭环；
* 「解释当前页」自动讲解为显式按钮触发、单页范围；
* 支持选中文本讲解贴纸与追问链，贴纸持久化与折叠 / 展开；
* 支持文档 / 章节 / 课程级总结；
* 实现基础的配额管理（四类配额桶）和前端提示；
* 所有 AI 内容统一由 Markdown + LaTeX + 代码高亮组件渲染。

### 8.2 本期不做（范围外）

* 多人协作 / 分享课程；
* 移动端专门适配与 App；
* 复杂题库与刷题功能；
* 用户自定义编辑贴纸内容或添加个人备注；
* 复杂的学习路径推荐与全面个性化引导。

---

## 九、验收标准（示例）

1. **核心流程可跑通**

   * 用户可注册 / 登录 / 登出；
   * 可创建课程、上传 PDF、在课程详情页查看资料；
   * 在 PDF 阅读 & AI 学习页：

     * 可以使用「解释当前页」生成自动讲解贴纸；
     * 可以通过选中文本生成讲解贴纸与追问链；
     * 可以在问答区域发起问题与生成总结。

2. **AI 讲解质量在验收样本上可接受**

   * 选取 2–3 门真实课程（如高数、线代、统计），抽样若干 PDF 页面与题目；
   * 验证 AI 在解释推导、给出例子、总结要点上的质量；
   * 作业 / 考卷类 PDF 中，自动讲解应以“考点与思路分析”为主，不直接给出完整答案；
   * 对明显错误和幻觉率有定性评估，并形成改进计划。

3. **贴纸与问答行为符合设计**

   * 自动 / 手动贴纸样式有明显区分；
   * 贴纸可折叠 / 展开，折叠状态在重开文档时得以恢复；
   * 点击贴纸可使左侧 PDF 滚动到对应位置；
   * 不可选文本的 PDF 在 UI 中有明确说明，相关 AI 功能不可用但阅读功能正常。

4. **配额控制有效**

   * 当学习过程交互组 / 总结类配额接近上限时，前端有合理提示；
   * 触达配额上限时，对应功能被禁用并有明确文案说明；
   * 日志中可查询配额消耗情况（按配额桶维度）。

5. **性能基线达标**

   * 典型中等大小 PDF 首屏加载时间大部分情况下 ≤ 3 秒；
   * AI 响应在大部分情况下 ≤ 5 秒返回首响应或明显的「正在处理中」反馈。

6. **数据与埋点可用**

   * 关键行为（自动讲解、选中讲解、问答、总结）与 AI 调用日志在后台可查询；
   * 可用这些数据分析「贴纸 vs 问答」的使用情况，为后续优化提供依据。

> 本 Light PRD 作为实施基线，后续可根据实验反馈、使用数据和时间资源，在此框架内增减具体功能和细节实现方案。
